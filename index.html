<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tabele i Terminarze – Siatkówka</title>
<style>
  body{font-family:Arial, sans-serif; margin:0; background:#f2f5f9; color:#1c1c1c;}
  header{background:#0d3b66;color:#fff;padding:18px 16px;}
  h1{margin:0;}
  .container{max-width:1100px;margin:28px auto;padding:0 16px;}
  .card{background:#fff;border-radius:12px;margin-bottom:20px;overflow:hidden;
        box-shadow:0 6px 18px rgba(13,59,102,.08);}
  .card-header{background:#0d3b66;color:#fff;padding:14px 16px;
               border-bottom:3px solid #c9a227;}
  .card-header h2{margin:0;}
  .table-wrap{overflow-x:auto;}
  table{width:100%;border-collapse:collapse;min-width:500px;}
  thead th{background:#0d3b66;color:#fff;padding:10px;text-align:center;}
  tbody td{padding:10px;text-align:center;border-bottom:1px solid #eee;}
  tbody tr:nth-child(even){background:#f7f8fa;}
</style>
</head>
<body>
<header>
  <h1>Tabele, terminarze i rankingi</h1>
</header>
<main class="container">

  <!-- Ranking Młodzik -->
  <section class="card">
    <div class="card-header"><h2>Ranking – Młodzik</h2></div>
    <div class="table-wrap">
      <table id="tbl-ranking-mlodzik">
        <thead><tr><th>Drużyna</th><th>Punkty</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- Ranking Młodziczka -->
  <section class="card">
    <div class="card-header"><h2>Ranking – Młodziczka</h2></div>
    <div class="table-wrap">
      <table id="tbl-ranking-mlodziczka">
        <thead><tr><th>Drużyna</th><th>Punkty</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- przykładowa sekcja terminarza -->
  <section class="card">
    <div class="card-header"><h2>Terminarz – Młodzik (eliminacje)</h2></div>
    <div class="table-wrap">
      <table id="tbl-m-elim">
        <thead><tr>
          <th>Data</th><th>Gospodarz</th><th>Gość</th>
          <th>Wynik</th><th>Sety</th><th>Grupa</th><th>Protokół</th>
        </tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

</main>
<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzlGlr_x4HJzTYQvB4W4gZu4opJd3PB8Rw3G2mBT8sLwNXQiHZJkvKYoS5NcYZKZrvK/exec"; // <--- tu Twój link z Apps Script

function createCell(text, opts={}) {
  const td = document.createElement('td');
  if (opts.left) td.style.textAlign = 'left';
  td.textContent = text ?? '';
  return td;
}

function createLinkCell(url) {
  const td = document.createElement('td');
  if (url) {
    const a = document.createElement('a');
    a.href = url;
    a.target = "_blank";
    a.textContent = "Protokół";
    td.appendChild(a);
  }
  return td;
}

async function loadData(){
  try {
    const res = await fetch(WEB_APP_URL);
    const data = await res.json();

    // Ranking Młodzik
    const tbRM = document.querySelector('#tbl-ranking-mlodzik tbody');
    tbRM.innerHTML = '';
    data.rankingi.m_liga.forEach(row => {
      const tr = document.createElement('tr');
      tr.appendChild(createCell(row.team, {left:true}));
      tr.appendChild(createCell(row.total));
      tbRM.appendChild(tr);
    });

    // Ranking Młodziczka
    const tbRF = document.querySelector('#tbl-ranking-mlodziczka tbody');
    tbRF.innerHTML = '';
    data.rankingi.f_liga.forEach(row => {
      const tr = document.createElement('tr');
      tr.appendChild(createCell(row.team, {left:true}));
      tr.appendChild(createCell(row.total));
      tbRF.appendChild(tr);
    });

    // Terminarz Młodzik (eliminacje)
    const tbT = document.querySelector('#tbl-m-elim tbody');
    tbT.innerHTML = '';
    data.terminarze.m_elim.forEach(row => {
      const [date, home, away, score, sets, group, protocol] = row;
      const tr = document.createElement('tr');
      tr.appendChild(createCell(date));
      tr.appendChild(createCell(home));
      tr.appendChild(createCell(away));
      tr.appendChild(createCell(score));
      tr.appendChild(createCell(sets));
      tr.appendChild(createCell(group));
      tr.appendChild(createLinkCell(protocol));
      tbT.appendChild(tr);
    });

  } catch (err) {
    console.error("Błąd wczytywania danych:", err);
  }
}
loadData();
</script>
</body>
</html>
