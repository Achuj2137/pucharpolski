<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tabele i Terminarz ‚Äì siatk√≥wka</title>
<style>
  :root{
    --pzps-blue:#0d3b66;
    --pzps-gold:#c9a227;
    --row-alt:#f7f8fa;
    --text:#1c1c1c;
    --muted:#6b7280;
    --win:#e7f6ec;
    --loss:#fdecec;
  }
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#f2f5f9;}
  header.site-header{background:var(--pzps-blue);color:#fff;padding:18px 16px;box-shadow:0 2px 8px rgba(0,0,0,.08);}
  .site-header .wrap{max-width:1100px;margin:0 auto;}
  .site-title{margin:0;font-weight:700;font-size:clamp(18px,2.3vw,24px);}
  .container{max-width:1100px;margin:28px auto;padding:0 16px;}
  .card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 6px 18px rgba(13,59,102,.08);margin-bottom:20px;border:1px solid #e8edf3;}
  .card-header{background:linear-gradient(180deg, #114676 0%, #0d3b66 100%);color:#fff;padding:14px 16px;border-bottom:3px solid var(--pzps-gold);}
  .card-header h2{margin:0;font-size:clamp(16px,2vw,20px);}
  .card-body{padding:12px 14px;}
  .table-wrap{overflow-x:auto;}
  table.pzps{width:100%;border-collapse:collapse;min-width:560px;}
  table.pzps thead th{text-align:center;font-weight:700;color:#fff;background:var(--pzps-blue);padding:10px 8px;}
  table.pzps tbody td{padding:10px 8px;text-align:center;border-bottom:1px solid #eef2f6;}
  table.pzps tbody tr:nth-child(even){background:var(--row-alt);}
  .chip{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid transparent;}
  .chip-cat{background:#f9fafb;color:#334155;border-color:#e5e7eb;}
  tr.win-row{background:var(--win)!important;}
  tr.loss-row{background:var(--loss)!important;}
</style>
</head>
<body>
<header class="site-header">
  <div class="wrap">
    <h1 class="site-title">Tabele i terminarz ‚Äì siatk√≥wka m≈Çodzie≈ºowa</h1>
  </div>
</header>
<main class="container">
  <section class="card">
    <div class="card-header"><h2>M≈ÅODZIK</h2></div>
    <div class="card-body">
      <div class="table-wrap">
        <table class="pzps" id="tbl-mlodzik">
          <thead>
            <tr>
              <th>Dru≈ºyna</th>
              <th>Mecze</th>
              <th>Wygrane</th>
              <th>Przegrane</th>
              <th>Ma≈Çe pkt</th>
              <th>Punkty</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
  <section class="card">
    <div class="card-header"><h2>M≈ÅODZICZKA</h2></div>
    <div class="card-body">
      <div class="table-wrap">
        <table class="pzps" id="tbl-mlodziczka">
          <thead>
            <tr>
              <th>Dru≈ºyna</th>
              <th>Mecze</th>
              <th>Wygrane</th>
              <th>Przegrane</th>
              <th>Ma≈Çe pkt</th>
              <th>Punkty</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
  <section class="card">
    <div class="card-header"><h2>TERMINARZ</h2></div>
    <div class="card-body">
      <div class="table-wrap">
        <table class="pzps" id="tbl-terminarz">
          <thead>
            <tr>
              <th>Data</th>
              <th>Gospodarz</th>
              <th>Go≈õƒá</th>
              <th>Wynik</th>
              <th>Sety</th>
              <th>Kategoria</th>
              <th>Protok√≥≈Ç</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
</main>
<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyMbFRv71q3XjOJ5JQmSWlQp1fXrqvnFa9hdooq9RJ2hY7RLHC1FiE3BC-Wwqg/exec";

function createCell(text, opts={}) {
  const td = document.createElement('td');
  if (opts.left) td.style.textAlign = 'left';
  td.textContent = text ?? '';
  return td;
}
function formatDate(d) {
  const dt = new Date(d);
  return !isNaN(dt) ? dt.toLocaleDateString('pl-PL') : d;
}
async function loadData(){
  try {
    const res = await fetch(WEB_APP_URL, { cache:'no-store' });
    const data = await res.json();

    // M≈Çodzik
    const tbM = document.querySelector('#tbl-mlodzik tbody');
    tbM.innerHTML = '';
    data.tabela_mlodzik.forEach(row => {
      const tr = document.createElement('tr');
      tr.appendChild(createCell(row.team, {left:true}));
      tr.appendChild(createCell(row.matches));
      tr.appendChild(createCell(row.wins));
      tr.appendChild(createCell(row.losses));
      tr.appendChild(createCell(row.smallPoints));
      tr.appendChild(createCell(row.scoreTable));
      tbM.appendChild(tr);
    });

    // M≈Çodziczka
    const tbF = document.querySelector('#tbl-mlodziczka tbody');
    tbF.innerHTML = '';
    data.tabela_mlodziczka.forEach(row => {
      const tr = document.createElement('tr');
      tr.appendChild(createCell(row.team, {left:true}));
      tr.appendChild(createCell(row.matches));
      tr.appendChild(createCell(row.wins));
      tr.appendChild(createCell(row.losses));
      tr.appendChild(createCell(row.smallPoints));
      tr.appendChild(createCell(row.scoreTable));
      tbF.appendChild(tr);
    });

    // Terminarz
    const tbT = document.querySelector('#tbl-terminarz tbody');
    tbT.innerHTML = '';
    data.terminarz
      .filter(row => row[0] && row[1] && row[2])
      .forEach(row => {
        const tr = document.createElement('tr');
        const [date, home, away, score, sets, cat, protokol] = row;

        tr.appendChild(createCell(formatDate(date)));
        tr.appendChild(createCell(home));
        tr.appendChild(createCell(away));
        tr.appendChild(createCell(score));
        tr.appendChild(createCell(sets));
        tr.appendChild(createCell(cat));

        const tdProt = document.createElement('td');
        if (protokol) {
          const a = document.createElement('a');
          a.href = protokol;
          a.target = "_blank";
          a.textContent = "üìÑ Zobacz";
          tdProt.appendChild(a);
        } else {
          tdProt.textContent = "‚Äî";
        }
        tr.appendChild(tdProt);

        tbT.appendChild(tr);
      });
  } catch (err) {
    console.error("B≈ÇƒÖd wczytywania danych:", err);
  }
}
loadData();
</script>
</body>
</html>
