<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tabela i terminarz</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: url('https://upload.wikimedia.org/wikipedia/commons/5/51/Volleyball_court_background.jpg') no-repeat center center/cover;
    }
    .container {
        max-width: 900px;
        margin: 30px auto;
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    header {
        background: #1d5ea8;
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    header h1 {
        margin: 0;
        font-size: 22px;
        display: flex;
        gap: 20px;
    }
    header button {
        background: white;
        border: none;
        color: #1d5ea8;
        font-weight: bold;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
    }
    .tables {
        display: flex;
        gap: 20px;
        padding: 20px;
        flex-wrap: wrap;
    }
    table {
        border-collapse: collapse;
        width: 100%;
        min-width: 200px;
        background: #f8f8f8;
        border-radius: 10px;
        overflow: hidden;
    }
    th, td {
        padding: 8px 12px;
        border-bottom: 1px solid #ddd;
        text-align: center;
    }
    th {
        background: #ececec;
    }
    h2 {
        padding: 0 20px;
    }
    .schedule {
        padding: 0 20px 20px;
    }
    .match {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        border-bottom: 1px solid #ddd;
    }
    .add-match {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }
    .add-match input {
        padding: 5px;
        flex: 1;
    }
    .add-match button {
        background: #f26522;
        border: none;
        color: white;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
    }
</style>
</head>
<body>

<div class="container">
    <header>
        <h1>
            <span>MŁODZIK</span>
            <span>MŁODZICZKA</span>
        </h1>
        <button onclick="login()">Zaloguj</button>
    </header>

    <div class="tables">
        <table id="table1">
            <tr><th>Drużyna</th><th>Mecze</th><th>Wygrane</th><th>Przegrane</th></tr>
        </table>
        <table id="table2">
            <tr><th>Drużyna</th><th>Mecze</th><th>Wygrane</th><th>Punkty</th></tr>
        </table>
    </div>

    <h2>TERMINARZ</h2>
    <div class="schedule" id="schedule"></div>

    <div class="schedule">
        <div class="add-match">
            <input type="text" id="matchDate" placeholder="Data (DD.MM)">
            <input type="text" id="team1" placeholder="Drużyna 1">
            <input type="text" id="team2" placeholder="Drużyna 2">
            <button onclick="addMatch()">Dodaj mecz</button>
        </div>
    </div>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyl106GXSzKOMWjI7cJ46mbzv-7Q-nMKPv0VZKBYrL_-V9PcV6jFqqwGL-jLx_7-1TE/exec";

async function fetchData() {
    const res = await fetch(WEB_APP_URL + "?action=get");
    const data = await res.json();

    // Przykład danych — musisz dopasować do formatu z Apps Script
    const teams1 = [
        ["Drużyna A", 3, 3, 0],
        ["Drużyna B", 3, 2, 1],
        ["Drużyna C", 3, 1, 2],
        ["Drużyna D", 3, 0, 3],
    ];
    const teams2 = [
        ["Drużyna A", 3, 0, 9],
        ["Drużyna B", 2, 1, 6],
        ["Drużyna C", 1, 2, 3],
        ["Drużyna D", 0, 3, 0],
    ];
    const matches = [
        ["01.05", "Drużyna A", "Drużyna C"],
        ["02.05", "Drużyna B", "Drużyna D"],
        ["03.05", "Drużyna A", "Drużyna B"],
    ];

    fillTable("table1", teams1);
    fillTable("table2", teams2);
    fillSchedule(matches);
}

function fillTable(id, rows) {
    const table = document.getElementById(id);
    rows.forEach(r => {
        const tr = document.createElement("tr");
        r.forEach(cell => {
            const td = document.createElement("td");
            td.textContent = cell;
            tr.appendChild(td);
        });
        table.appendChild(tr);
    });
}

function fillSchedule(matches) {
    const schedule = document.getElementById("schedule");
    schedule.innerHTML = "";
    matches.forEach(m => {
        const div = document.createElement("div");
        div.className = "match";
        div.textContent = `${m[0]}  ${m[1]} vs ${m[2]}`;
        schedule.appendChild(div);
    });
}

async function addMatch() {
    const date = document.getElementById("matchDate").value;
    const t1 = document.getElementById("team1").value;
    const t2 = document.getElementById("team2").value;

    if(!date || !t1 || !t2) return alert("Wypełnij wszystkie pola!");

    await fetch(WEB_APP_URL, {
        method: "POST",
        body: JSON.stringify({ action: "addMatch", date, team1: t1, team2: t2 }),
        headers: { "Content-Type": "application/json" }
    });
    fetchData();
}

function login() {
    const pass = prompt("Podaj hasło:");
    if(pass) {
        fetch(WEB_APP_URL, {
            method: "POST",
            body: JSON.stringify({ action: "auth", password: pass }),
            headers: { "Content-Type": "application/json" }
        }).then(r => r.json()).then(d => {
            if(d.ok) alert("Zalogowano pomyślnie");
            else alert("Błędne hasło");
        });
    }
}

fetchData();
</script>
</body>
</html>
